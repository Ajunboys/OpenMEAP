<html>
<!--
 ###############################################################################
 #                                                                             #
 #    Copyright (C) 2011 OpenMEAP, Inc.                                        #
 #    Credits to Jonathan Schang & Robert Thacher                              #
 #                                                                             #
 #    Released under the GPLv3                                                 #
 #                                                                             #
 #    OpenMEAP is free software: you can redistribute it and/or modify         #
 #    it under the terms of the GNU General Public License as published by     #
 #    the Free Software Foundation, either version 3 of the License, or        #
 #    (at your option) any later version.                                      #
 #                                                                             #
 #    OpenMEAP is distributed in the hope that it will be useful,              #
 #    but WITHOUT ANY WARRANTY; without even the implied warranty of           #
 #    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the            #
 #    GNU General Public License for more details.                             #
 #                                                                             #
 #    You should have received a copy of the GNU General Public License        #
 #    along with OpenMEAP.  If not, see <http://www.gnu.org/licenses/>.        #
 #                                                                             #
 ###############################################################################
-->
<head>
<script type="text/javascript" language="Javascript" src="js/openmeap.js"></script>
</head>

<body>

<h2>OpenMEAP Javascript API tests</h2>
    
<h6>Validate OpenMEAP exists</h6>
<script>
document.write("typeof(OpenMEAP) = "+typeof(OpenMEAP)+"<br/>");
</script>
    
<h6>Update Check</h6>
<div id="update-callback">No update</div>
<script>
	try {
		OpenMEAP.updates.onInit();
	} catch(e) {
		document.write('<p>Error '+e+'</p>');
	}
</script>
    
<h6>Test Preferences</h6>
<script>
	if( typeof(OpenMEAP.getPreferences) != 'function' ) {
        document.write("OpenMEAP.getPreferences is not a function<br/>");
    }
    
	var prefs = OpenMEAP.getPreferences("test-prefs");
    if( typeof(prefs) != 'object' ) {
        document.write("OpenMEAP.getPreferences(\"test-prefs\") did not return an object<br/>");
    }
    if( prefs.get("key")==null ) {
        if( prefs.put("key","value") ) { 
            OpenMEAP.reload();
        } else {
            document.write("prefs.put key=value returned false or null<br/>");
        }
    } else {
        document.write("prefs.put passes<br/>");
        prefs.remove("key");
    }
</script>
    
<h6>Test Clear Cache</h6>

</body>
</html>